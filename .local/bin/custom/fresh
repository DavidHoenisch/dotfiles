#!/bin/bash

DOTFILES_GITHUB_REPO="https://github.com/DavidHoenisch/dotfiles.git"
OUTPUT_GIT_DIR="$HOME/dotfiles"
BIN_DIR="$HOME/.local/bin/custom"

# Install all the prereqs

if [ $UID -ne 0 ]; then
	echo "run with sudo!"
	exit 1
fi

declare -a prereq=("git" "stow" "yay")

for app in ${prereq[@]}; do
	sudo pacman -Sy --noconfirm "$app"
done

# Clone the dotfiles repo
git clone "$DOTFILES_GITHUB_REPO" "$OUTPUT_GIT_DIR"

(cd "$OUTPUT_GIT_DIR" && stow .)


$BIN_DIR/gmanage restore
